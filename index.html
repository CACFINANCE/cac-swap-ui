<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CAC Swap</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí±</text></svg>" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #1a0033 0%, #2d1b4e 50%, #1a0033 100%);
      font-family: 'Roboto Mono', monospace;
      overflow-x: hidden;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      font-size: 0.67rem;
    }

    .container {
      position: relative;
      z-index: 1;
      border-radius: 8px;
      padding: 1.33rem;
      box-shadow: 0 0 30px rgba(147, 51, 234, 0.3);
      width: 100%;
      max-width: 380px;
      margin: 1.33rem auto;
      background: rgba(30, 10, 50, 0.95);
      border: 1px solid rgba(147, 51, 234, 0.4);
      color: #e9d5ff;
    }

    h1 {
      font-size: 1.3em;
      font-weight: 700;
      margin-top: 0;
      margin-bottom: 1rem;
      color: #c084fc;
      text-align: center;
    }

    h3 {
      font-size: 0.75em;
      color: #d8b4fe;
      margin-top: 1rem;
      margin-bottom: 0.5rem;
    }

    p, label {
      font-size: 0.67em;
      color: #e9d5ff;
    }

    button {
      border-radius: 5px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 0.5rem;
      width: 100%;
      font-size: 0.67rem;
      background: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
      color: #fff;
      padding: 0.6rem;
    }

    button:hover {
      background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
      box-shadow: 0 4px 12px rgba(147, 51, 234, 0.4);
    }

    button:disabled {
      background: #555;
      cursor: not-allowed;
      opacity: 0.5;
    }

    input, select {
      width: 100%;
      border-radius: 5px;
      margin-top: 0.33rem;
      font-family: 'Roboto Mono', monospace;
      font-size: 0.67rem;
      padding: 0.5rem;
      border: 1px solid rgba(147, 51, 234, 0.5);
      background: rgba(10, 5, 20, 0.6);
      color: #e9d5ff;
    }

    input:focus, select:focus {
      outline: none;
      border-color: #9333ea;
      box-shadow: 0 0 8px rgba(147, 51, 234, 0.3);
    }

    #status {
      font-weight: bold;
      margin-top: 0.67rem;
      font-size: 0.67rem;
      color: #d8b4fe;
      min-height: 1.2em;
    }

    .status-warning {
      color: #fbbf24 !important;
    }

    .status-error {
      color: #f87171 !important;
    }

    .status-success {
      color: #4ade80 !important;
    }

    .info-group {
      border-radius: 5px;
      padding: 0.67rem;
      margin-top: 0.67rem;
      font-size: 0.63rem;
      background: rgba(147, 51, 234, 0.1);
      color: #e9d5ff;
      border: 1px solid rgba(147, 51, 234, 0.2);
    }

    .info-group span {
      font-weight: 600;
      color: #c084fc;
    }

    .swap-direction {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0;
    }

    .swap-arrow {
      font-size: 1.5em;
      color: #9333ea;
    }

    .pool-order {
      background: rgba(147, 51, 234, 0.15);
      padding: 0.5rem;
      border-radius: 5px;
      margin-top: 0.5rem;
      border-left: 3px solid #9333ea;
    }

    .pool-order-active {
      background: rgba(34, 197, 94, 0.15);
      border-left-color: #22c55e;
    }

    .mini-text {
      font-size: 0.58rem;
      color: #c084fc;
      margin-top: 0.5rem;
    }

    @media (max-width: 480px) {
      .container {
        padding: 1rem;
        margin: 1rem 0.67rem;
        max-width: 100%;
      }
      h1 {
        font-size: 1.1rem;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üí± CAC Swap Pool</h1>

    <button id="connectBtn">
      <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" alt="MetaMask"
        style="width:30px; height:30px; vertical-align:middle; margin-right:8px;" />
      Connect MetaMask Wallet
    </button>
    <p id="connected">Not connected</p>
    <p id="status">Status: Idle</p>

    <div class="info-group">
      <h3>üìä Live CAC Price</h3>
      <p style="font-size: 1.2em; font-weight: 700; color: #c084fc; margin: 0.5rem 0;">
        1 CAC = <span id="liveCacPrice">‚Äì</span> USDC
        <span id="priceSpinner" class="spinner" style="display:none;"></span>
      </p>
    </div>

    <div class="info-group">
      <h3>Your Balances</h3>
      <p>ETH: <span id="ethBal">‚Äì</span></p>
      <p>USDC: <span id="usdcBal">‚Äì</span></p>
      <p>CAC: <span id="cacBal">‚Äì</span></p>
    </div>

    <div class="info-group">
      <h3>1. Join Swap Pool (Provide Liquidity)</h3>
      <p class="mini-text" style="background: rgba(239, 68, 68, 0.1); padding: 0.5rem; border-radius: 5px; border-left: 3px solid #ef4444;">
        ‚ö†Ô∏è <strong>Demo Mode:</strong> Smart contract deployment required before pool participation is enabled.
      </p>
      
      <p class="mini-text" style="background: rgba(147, 51, 234, 0.1); padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem;">
        üí° <strong>Tip:</strong> You can provide USDC, CAC, or both! Each token earns 0.3% fees when matched.
      </p>

      <div style="margin-top: 1rem;">
        <h3 style="font-size: 0.7em;">Provide USDC Liquidity</h3>
        <label for="provideUsdcAmount">USDC Amount:</label>
        <input type="number" id="provideUsdcAmount" step="0.000001" placeholder="Enter USDC amount" disabled />
        <button id="approveUsdcBtn" disabled style="opacity: 0.5; margin-top: 0.5rem;">üîí Approve USDC for Pool</button>
      </div>

      <div style="margin-top: 1rem;">
        <h3 style="font-size: 0.7em;">Provide CAC Liquidity</h3>
        <label for="provideCacAmount">CAC Amount:</label>
        <input type="number" id="provideCacAmount" step="0.00000001" placeholder="Enter CAC amount" disabled />
        <button id="approveCacBtn" disabled style="opacity: 0.5; margin-top: 0.5rem;">üîí Approve CAC for Pool</button>
      </div>

      <div style="margin-top: 1rem;">
        <h3 style="font-size: 0.7em;">Or Provide Both</h3>
        <button id="approveBothBtn" disabled style="opacity: 0.5; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">üîí Approve Both USDC & CAC</button>
        <p class="mini-text" style="margin-top: 0.5rem;">Maximize earnings by providing liquidity for both directions!</p>
      </div>
      
      <div id="yourOrders" style="margin-top: 1rem;">
        <h3>Your Active Pool Orders</h3>
        <div id="ordersList">
          <p class="mini-text">Connect wallet to view orders</p>
        </div>
      </div>
    </div>

    <div class="info-group">
      <h3>2. Instant Swap</h3>
      <p class="mini-text" style="background: rgba(239, 68, 68, 0.1); padding: 0.5rem; border-radius: 5px; border-left: 3px solid #ef4444;">
        ‚ö†Ô∏è <strong>Demo Mode:</strong> Swap calculations shown below. Actual swaps require smart contract.
      </p>
      
      <label for="swapFrom">Swap From:</label>
      <select id="swapFrom">
        <option value="USDC">USDC</option>
        <option value="CAC">CAC</option>
      </select>

      <div class="swap-direction">
        <span id="fromToken">USDC</span>
        <span class="swap-arrow">‚áÑ</span>
        <span id="toToken">CAC</span>
      </div>

      <label for="swapAmount">Amount to Swap:</label>
      <input type="number" id="swapAmount" step="0.000001" placeholder="Enter amount to see calculation" />

      <div id="swapCalculation" style="margin-top: 1rem; padding: 0.75rem; background: rgba(147, 51, 234, 0.15); border-radius: 5px; border: 1px solid rgba(147, 51, 234, 0.3); display: none;">
        <h3 style="margin-top: 0; color: #a78bfa;">üí° Swap Calculation:</h3>
        <div id="calcDetails" style="font-size: 0.65rem; line-height: 1.6;"></div>
      </div>

      <p class="mini-text" style="margin-top: 0.5rem;">Available Pool Liquidity: <span id="poolLiquidity">Contract required</span></p>

      <button id="swapBtn" disabled style="opacity: 0.5;">üîí Awaiting Contract Deployment</button>
    </div>

    <div class="info-group">
      <h3>How It Works</h3>
      <p class="mini-text">
        <strong>üìä CAC Price:</strong> Fetched live from reserve API<br>
        Current: <span id="currentPrice" style="color: #10b981; font-weight: 700;">Loading...</span> USDC per CAC<br>
        <em style="opacity: 0.8;">(Price auto-updates from reserve - no oracle needed)</em><br><br>
        
        <strong>üí∞ Flexible Liquidity Provision:</strong><br>
        ‚Ä¢ <strong>USDC Only:</strong> Approve USDC ‚Üí Match CAC‚ÜíUSDC swaps<br>
        ‚Ä¢ <strong>CAC Only:</strong> Approve CAC ‚Üí Match USDC‚ÜíCAC swaps<br>
        ‚Ä¢ <strong>Both Tokens:</strong> Approve both ‚Üí Match swaps in both directions!<br>
        ‚Ä¢ Each position earns 0.3% fee independently<br><br>
        
        <strong>‚ö†Ô∏è CAC 1% Transfer Fee:</strong><br>
        ‚Ä¢ All CAC transfers have 1% fee (built into token contract)<br>
        ‚Ä¢ When providing CAC: You approve 100, pool receives ~99<br>
        ‚Ä¢ When swapping CAC: Recipient gets amount minus 1% fee<br><br>
        
        <strong>üîÑ Swap Process:</strong><br>
        1. <strong>Join Pool:</strong> Approve USDC and/or CAC (stays in your wallet)<br>
        2. <strong>Auto-Match:</strong> Backend randomly selects you when someone swaps<br>
        3. <strong>Atomic Swap:</strong> Smart contract executes trustless exchange<br>
        4. <strong>Earn 0.3%:</strong> Get swap fee instantly as reward<br>
        5. <strong>Withdraw:</strong> Remove liquidity anytime
      </p>
    </div>
  </div>

  <script>
    (function() {
      // ‚îÄ‚îÄ Config ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      const USDC_ADDRESS = "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48";
      const CAC_ADDRESS = "0x50f3C527e5772BB24897591C20f7430ea8c34437";
      const SWAP_POOL_CONTRACT = "0x0000000000000000000000000000000000000000"; // TODO: Deploy contract
      const BACKEND_API = "https://your-backend.com/api"; // TODO: Backend endpoint
      const PRICE_URL = "https://cac-reserve.onrender.com/api/update-price"; // ‚úÖ Oracle price
      
      const CHAIN_ID = 1;
      const USDC_DECIMALS = 6;
      const CAC_DECIMALS = 8;
      const SWAP_FEE = 0.003; // 0.3% protocol fee
      const CAC_TRANSFER_FEE = 0.01; // 1% CAC built-in transfer fee

      // UI Elements
      const connectBtn = document.getElementById("connectBtn");
      const connectedEl = document.getElementById("connected");
      const statusEl = document.getElementById("status");
      const ethBalEl = document.getElementById("ethBal");
      const usdcBalEl = document.getElementById("usdcBal");
      const cacBalEl = document.getElementById("cacBal");
      const provideToken = document.getElementById("provideToken");
      const provideAmount = document.getElementById("provideAmount");
      const approvePoolBtn = document.getElementById("approvePoolBtn");
      const swapFrom = document.getElementById("swapFrom");
      const fromToken = document.getElementById("fromToken");
      const toToken = document.getElementById("toToken");
      const swapAmount = document.getElementById("swapAmount");
      const swapBtn = document.getElementById("swapBtn");
      const poolLiquidity = document.getElementById("poolLiquidity");
      const ordersList = document.getElementById("ordersList");
      const liveCacPrice = document.getElementById("liveCacPrice");
      const priceSpinner = document.getElementById("priceSpinner");
      const swapCalculation = document.getElementById("swapCalculation");
      const calcDetails = document.getElementById("calcDetails");

      let provider, signer, user, cacPrice;

      const ERC20_ABI = [
        "function balanceOf(address) view returns (uint256)",
        "function allowance(address,address) view returns (uint256)",
        "function approve(address,uint256) returns (bool)"
      ];

      // ‚îÄ‚îÄ Fetch CAC Live Price from Reserve API ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      async function fetchCacPrice() {
        try {
          priceSpinner.style.display = "inline-block";
          
          const res = await fetch(PRICE_URL, { cache: "no-store" });
          if (!res.ok) {
            throw new Error(`HTTP ${res.status}`);
          }
          
          const data = await res.json();
          
          // API returns {"price":"4.703541"} - this is the official CAC price
          if (data.price !== undefined) {
            const newPrice = parseFloat(data.price);
            
            if (!isFinite(newPrice) || newPrice <= 0) {
              throw new Error("Invalid price value");
            }
            
            cacPrice = newPrice;
            liveCacPrice.innerText = cacPrice.toFixed(6);
            
            // Also update the "How It Works" section price
            const currentPriceDisplay = document.getElementById("currentPrice");
            if (currentPriceDisplay) {
              currentPriceDisplay.innerText = cacPrice.toFixed(6);
            }
            
            console.log(`‚úÖ CAC Price from Reserve: ${cacPrice} USDC`);
            
            // Update calculation if user has entered amount
            updateSwapCalculation();
            
            priceSpinner.style.display = "none";
            
            return cacPrice;
          } else {
            throw new Error("Price field missing in API response");
          }
        } catch (err) {
          console.error("‚ùå Price fetch error:", err);
          liveCacPrice.innerText = "Error";
          priceSpinner.style.display = "none";
          return null;
        }
      }

      // ‚îÄ‚îÄ Update Swap Calculation Display ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function updateSwapCalculation() {
        const amount = parseFloat(swapAmount.value);
        if (!amount || amount <= 0 || !cacPrice) {
          swapCalculation.style.display = "none";
          return;
        }

        const fromTokenType = swapFrom.value;
        let html = '';

        if (fromTokenType === "USDC") {
          // USDC ‚Üí CAC swap calculation
          const step1 = amount / cacPrice;
          const protocolFee = step1 * SWAP_FEE;
          const afterProtocolFee = step1 - protocolFee;
          const cacTransferFee = afterProtocolFee * CAC_TRANSFER_FEE;
          const finalReceived = afterProtocolFee - cacTransferFee;
          
          html = `
            <p><strong>Input:</strong> ${amount.toFixed(6)} USDC</p>
            <p><strong>Reserve Price:</strong> 1 CAC = ${cacPrice.toFixed(6)} USDC</p>
            <hr style="border: 0; border-top: 1px solid rgba(147, 51, 234, 0.3); margin: 0.5rem 0;">
            <p>1Ô∏è‚É£ Convert at reserve price: ${amount.toFixed(6)} √∑ ${cacPrice.toFixed(6)} = <strong>${step1.toFixed(8)} CAC</strong></p>
            <p>2Ô∏è‚É£ Protocol fee (0.3%): ${step1.toFixed(8)} √ó 0.003 = <strong>${protocolFee.toFixed(8)} CAC</strong> ‚Üí LP earns this</p>
            <p>3Ô∏è‚É£ After protocol fee: ${step1.toFixed(8)} - ${protocolFee.toFixed(8)} = <strong>${afterProtocolFee.toFixed(8)} CAC</strong></p>
            <p>4Ô∏è‚É£ CAC transfer fee (1%): ${afterProtocolFee.toFixed(8)} √ó 0.01 = <strong>${cacTransferFee.toFixed(8)} CAC</strong> ‚Üí Token fee</p>
            <hr style="border: 0; border-top: 1px solid rgba(147, 51, 234, 0.3); margin: 0.5rem 0;">
            <p style="font-size: 0.75rem; color: #10b981;"><strong>‚úÖ You Receive: ${finalReceived.toFixed(8)} CAC</strong></p>
          `;
        } else {
          // CAC ‚Üí USDC swap calculation
          const cacTransferFee = amount * CAC_TRANSFER_FEE;
          const cacAfterTransferFee = amount - cacTransferFee;
          const usdcValue = cacAfterTransferFee * cacPrice;
          const protocolFee = usdcValue * SWAP_FEE;
          const finalReceived = usdcValue - protocolFee;
          
          html = `
            <p><strong>Input:</strong> ${amount.toFixed(8)} CAC</p>
            <p><strong>Reserve Price:</strong> 1 CAC = ${cacPrice.toFixed(6)} USDC</p>
            <hr style="border: 0; border-top: 1px solid rgba(147, 51, 234, 0.3); margin: 0.5rem 0;">
            <p>1Ô∏è‚É£ CAC transfer fee (1%): ${amount.toFixed(8)} √ó 0.01 = <strong>${cacTransferFee.toFixed(8)} CAC</strong> ‚Üí Token fee</p>
            <p>2Ô∏è‚É£ CAC received by LP: ${amount.toFixed(8)} - ${cacTransferFee.toFixed(8)} = <strong>${cacAfterTransferFee.toFixed(8)} CAC</strong></p>
            <p>3Ô∏è‚É£ Convert at reserve price: ${cacAfterTransferFee.toFixed(8)} √ó ${cacPrice.toFixed(6)} = <strong>${usdcValue.toFixed(6)} USDC</strong></p>
            <p>4Ô∏è‚É£ Protocol fee (0.3%): ${usdcValue.toFixed(6)} √ó 0.003 = <strong>${protocolFee.toFixed(6)} USDC</strong> ‚Üí LP earns this</p>
            <hr style="border: 0; border-top: 1px solid rgba(147, 51, 234, 0.3); margin: 0.5rem 0;">
            <p style="font-size: 0.75rem; color: #10b981;"><strong>‚úÖ You Receive: ${finalReceived.toFixed(6)} USDC</strong></p>
          `;
        }

        calcDetails.innerHTML = html;
        swapCalculation.style.display = "block";
      }

      // Update swap direction display
      swapFrom.onchange = () => {
        if (swapFrom.value === "USDC") {
          fromToken.innerText = "USDC";
          toToken.innerText = "CAC";
        } else {
          fromToken.innerText = "CAC";
          toToken.innerText = "USDC";
        }
        updateSwapCalculation();
      };

      // Update calculation on amount change
      swapAmount.oninput = updateSwapCalculation;

      // Connect Wallet
      connectBtn.onclick = async () => {
        try {
          if (!window.ethereum) throw new Error("MetaMask not detected");
          
          provider = new ethers.providers.Web3Provider(window.ethereum);
          const net = await provider.getNetwork();
          if (net.chainId !== CHAIN_ID) {
            statusEl.innerText = "Status: Please switch to Ethereum Mainnet";
            statusEl.className = "status-error";
            return;
          }
          
          await provider.send("eth_requestAccounts", []);
          signer = provider.getSigner();
          user = await signer.getAddress();
          
          connectedEl.innerText = `Connected: ${user.slice(0, 6)}...${user.slice(-4)}`;
          statusEl.innerText = "Status: Connected ‚úÖ";
          statusEl.className = "status-success";
          
          await updateBalances();
          await fetchCacPrice();
          
        } catch (e) {
          console.error("Connect error:", e);
          statusEl.innerText = `Status: ${e.message}`;
          statusEl.className = "status-error";
        }
      };

      // Update Balances
      async function updateBalances() {
        try {
          const eth = await provider.getBalance(user);
          ethBalEl.innerText = ethers.utils.formatEther(eth).slice(0, 8);

          const usdcCtr = new ethers.Contract(USDC_ADDRESS, ERC20_ABI, provider);
          const ub = await usdcCtr.balanceOf(user);
          usdcBalEl.innerText = ethers.utils.formatUnits(ub, USDC_DECIMALS);

          const cacCtr = new ethers.Contract(CAC_ADDRESS, ERC20_ABI, provider);
          const cb = await cacCtr.balanceOf(user);
          cacBalEl.innerText = ethers.utils.formatUnits(cb, CAC_DECIMALS);
        } catch (e) {
          console.error("Balance error:", e);
        }
      }

      // Load Pool Liquidity (disabled in demo)
      async function loadPoolLiquidity() {
        poolLiquidity.innerText = "Smart contract required";
      }

      // Load Your Active Orders (disabled in demo)
      async function loadYourOrders() {
        if (!user) {
          ordersList.innerHTML = '<p class="mini-text">Connect wallet to view orders</p>';
          return;
        }
        
        // Demo: Show example of multiple liquidity positions
        ordersList.innerHTML = `
          <p class="mini-text" style="color: #fbbf24;">‚ö†Ô∏è Contract deployment required to view pool orders</p>
          <div style="margin-top: 0.5rem; opacity: 0.6;">
            <p class="mini-text"><strong>Example Structure:</strong></p>
            <div class="pool-order" style="margin-top: 0.5rem;">
              <p><strong>USDC Pool Position</strong></p>
              <p>Amount: 500 USDC</p>
              <p>Status: Active ‚úÖ</p>
              <p>Earned: 1.5 USDC</p>
            </div>
            <div class="pool-order" style="margin-top: 0.5rem;">
              <p><strong>CAC Pool Position</strong></p>
              <p>Amount: 100 CAC</p>
              <p>Status: Active ‚úÖ</p>
              <p>Earned: 0.3 CAC</p>
            </div>
          </div>
        `;
      }

      // Approve USDC for Pool (disabled in demo)
      approveUsdcBtn.onclick = async () => {
        statusEl.innerText = "Status: ‚ö†Ô∏è Smart contract must be deployed first";
        statusEl.className = "status-warning";
      };

      // Approve CAC for Pool (disabled in demo)
      approveCacBtn.onclick = async () => {
        statusEl.innerText = "Status: ‚ö†Ô∏è Smart contract must be deployed first";
        statusEl.className = "status-warning";
      };

      // Approve Both for Pool (disabled in demo)
      approveBothBtn.onclick = async () => {
        statusEl.innerText = "Status: ‚ö†Ô∏è Smart contract must be deployed first";
        statusEl.className = "status-warning";
      };

      // Execute Swap (disabled in demo)
      swapBtn.onclick = async () => {
        statusEl.innerText = "Status: ‚ö†Ô∏è Smart contract must be deployed first";
        statusEl.className = "status-warning";
      };

      // Initialize - Start fetching price immediately
      fetchCacPrice();
      setInterval(fetchCacPrice, 10000); // Update every 10 seconds even without wallet
      
      statusEl.innerText = "‚ö†Ô∏è Demo Mode: Connect wallet to see live calculations";
      statusEl.className = "status-warning";// Initialize
      statusEl.innerText = "Connect wallet to start ‚Ä¢ Price fetched from oracle";
      statusEl.className = "status-warning";
    })();
  </script>
</body>
</html>
